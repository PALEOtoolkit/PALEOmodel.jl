<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>PALEOmodel output · PALEOmodel Documentation</title><meta name="title" content="PALEOmodel output · PALEOmodel Documentation"/><meta property="og:title" content="PALEOmodel output · PALEOmodel Documentation"/><meta property="twitter:title" content="PALEOmodel output · PALEOmodel Documentation"/><meta name="description" content="Documentation for PALEOmodel Documentation."/><meta property="og:description" content="Documentation for PALEOmodel Documentation."/><meta property="twitter:description" content="Documentation for PALEOmodel Documentation."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">PALEOmodel Documentation</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">PALEOmodel.jl</a></li><li><span class="tocitem">Design</span><ul><li><a class="tocitem" href="../MathematicalFormulation/">Mathematical formulation of the reaction-transport problem</a></li></ul></li><li><span class="tocitem">HOWTOs</span><ul><li><a class="tocitem" href="../HOWTOshowmodelandoutput/">Displaying model configuration and output from the Julia REPL</a></li><li><a class="tocitem" href="../HOWTOsmallnegativevalues/">Managing small and negative values</a></li></ul></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../PALEOmodelSolvers/">PALEOmodel solvers</a></li><li class="is-active"><a class="tocitem" href>PALEOmodel output</a><ul class="internal"><li><a class="tocitem" href="#Run"><span>Run</span></a></li><li><a class="tocitem" href="#Output"><span>Output</span></a></li><li><a class="tocitem" href="#Field-Array"><span>Field Array</span></a></li><li><a class="tocitem" href="#Plotting-output"><span>Plotting output</span></a></li><li><a class="tocitem" href="#Analyze-reaction-network"><span>Analyze reaction network</span></a></li></ul></li></ul></li><li><a class="tocitem" href="../References/">References</a></li><li><a class="tocitem" href="../indexpage/">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Reference</a></li><li class="is-active"><a href>PALEOmodel output</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>PALEOmodel output</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/PALEOtoolkit/PALEOmodel.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/main/docs/src/PALEOmodelOutput.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="PALEOmodel-output"><a class="docs-heading-anchor" href="#PALEOmodel-output">PALEOmodel output</a><a id="PALEOmodel-output-1"></a><a class="docs-heading-anchor-permalink" href="#PALEOmodel-output" title="Permalink"></a></h1><h2 id="Run"><a class="docs-heading-anchor" href="#Run">Run</a><a id="Run-1"></a><a class="docs-heading-anchor-permalink" href="#Run" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOmodel.Run" href="#PALEOmodel.Run"><code>PALEOmodel.Run</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Run</code></pre><p>Container for model and output.</p><p><strong>Fields</strong></p><ul><li><code>model::Union{Nothing, PB.Model}</code>: The model instance.</li><li><code>output::Union{Nothing, AbstractOutputWriter}</code>: model output</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/Run.jl#L2-L10">source</a></section></article><h2 id="Output"><a class="docs-heading-anchor" href="#Output">Output</a><a id="Output-1"></a><a class="docs-heading-anchor-permalink" href="#Output" title="Permalink"></a></h2><p>PALEO model output is accumulated into a container such as an <a href="#OutputMemory">OutputMemory</a> instance that implements the <a href="#AbstractOutputWriter-interface">AbstractOutputWriter interface</a>.</p><h3 id="AbstractOutputWriter-interface"><a class="docs-heading-anchor" href="#AbstractOutputWriter-interface">AbstractOutputWriter interface</a><a id="AbstractOutputWriter-interface-1"></a><a class="docs-heading-anchor-permalink" href="#AbstractOutputWriter-interface" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOmodel.AbstractOutputWriter" href="#PALEOmodel.AbstractOutputWriter"><code>PALEOmodel.AbstractOutputWriter</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">AbstractOutputWriter</code></pre><p>Interface implemented by containers for PALEO model output.</p><p>Implementations should define methods for:</p><p><strong>Writing output</strong></p><ul><li><a href="#PALEOmodel.OutputWriters.initialize!"><code>initialize!</code></a></li><li><a href="#PALEOmodel.OutputWriters.add_record!"><code>add_record!</code></a></li></ul><p><strong>Modifying output</strong></p><ul><li><a href="#PALEOboxes.add_field!-Tuple{PALEOmodel.AbstractOutputWriter, PALEOmodel.FieldRecord}"><code>PB.add_field!</code></a></li></ul><p><strong>Querying output</strong></p><ul><li><a href="#PALEOboxes.get_table-Tuple{PALEOmodel.AbstractOutputWriter, AbstractString}"><code>PB.get_table</code></a></li><li><a href="#PALEOboxes.show_variables-Tuple{PALEOmodel.AbstractOutputWriter}"><code>PB.show_variables</code></a></li><li><a href="#PALEOboxes.has_variable-Tuple{PALEOmodel.AbstractOutputWriter, AbstractString}"><code>PB.has_variable</code></a></li></ul><p><strong>Accessing output data</strong></p><ul><li><a href="#PALEOmodel.get_array-Tuple{PALEOmodel.AbstractOutputWriter, AbstractString, NamedTuple}"><code>PALEOmodel.get_array</code></a></li><li><a href="#PALEOboxes.get_field-Tuple{PALEOmodel.AbstractOutputWriter, AbstractString}"><code>PB.get_field</code></a></li><li><a href="#PALEOboxes.get_mesh-Tuple{PALEOmodel.AbstractOutputWriter, AbstractString}"><code>PB.get_mesh</code></a></li><li><a href="#PALEOboxes.get_data-Tuple{PALEOmodel.AbstractOutputWriter, AbstractString}"><code>PB.get_data</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/OutputWriters.jl#L24-L49">source</a></section></article><h4 id="Writing-output"><a class="docs-heading-anchor" href="#Writing-output">Writing output</a><a id="Writing-output-1"></a><a class="docs-heading-anchor-permalink" href="#Writing-output" title="Permalink"></a></h4><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOmodel.OutputWriters.initialize!" href="#PALEOmodel.OutputWriters.initialize!"><code>PALEOmodel.OutputWriters.initialize!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">initialize!(
    output::PALEOmodel.AbstractOutputWriter, model, modeldata, [nrecords] 
    [;record_dim_name=:tmodel] [record_coord_units=&quot;yr&quot;]
)</code></pre><p>Initialize from a PALEOboxes::Model, optionally reserving memory for an assumed output dataset of <code>nrecords</code>.</p><p>The default for <code>record_dim_name</code> is <code>:tmodel</code>, for a sequence of records following the time evolution of the model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/OutputWriters.jl#L52-L62">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOmodel.OutputWriters.add_record!" href="#PALEOmodel.OutputWriters.add_record!"><code>PALEOmodel.OutputWriters.add_record!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_record!(output::PALEOmodel.AbstractOutputWriter, model, modeldata, rec_coord)</code></pre><p>Add an output record for current state of <code>model</code> at record coordinate <code>rec_coord</code>. The usual case (set by <a href="#PALEOmodel.OutputWriters.initialize!"><code>initialize!</code></a>) is that the record coordinate is model time <code>tmodel</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/OutputWriters.jl#L68-L73">source</a></section></article><h4 id="Modifying-output"><a class="docs-heading-anchor" href="#Modifying-output">Modifying output</a><a id="Modifying-output-1"></a><a class="docs-heading-anchor-permalink" href="#Modifying-output" title="Permalink"></a></h4><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOboxes.add_field!-Tuple{PALEOmodel.AbstractOutputWriter, PALEOmodel.FieldRecord}" href="#PALEOboxes.add_field!-Tuple{PALEOmodel.AbstractOutputWriter, PALEOmodel.FieldRecord}"><code>PALEOboxes.add_field!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_field!(output::PALEOmodel.AbstractOutputWriter, fr::PALEOmodel.FieldRecord)</code></pre><p>Add <a href="#PALEOmodel.FieldRecord"><code>PALEOmodel.FieldRecord</code></a> <code>fr</code> to <code>output</code>, with Domain and name defined by <code>fr.attributes[:var_domain]</code> and <code>fr.attributes[:var_name]</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/OutputWriters.jl#L76-L81">source</a></section></article><h4 id="Querying-output"><a class="docs-heading-anchor" href="#Querying-output">Querying output</a><a id="Querying-output-1"></a><a class="docs-heading-anchor-permalink" href="#Querying-output" title="Permalink"></a></h4><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOboxes.get_table-Tuple{PALEOmodel.AbstractOutputWriter, AbstractString}" href="#PALEOboxes.get_table-Tuple{PALEOmodel.AbstractOutputWriter, AbstractString}"><code>PALEOboxes.get_table</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_table(output::PALEOmodel.AbstractOutputWriter, domainname::AbstractString) -&gt; Table
get_table(output::PALEOmodel.AbstractOutputWriter, varnames::Vector{&lt;:AbstractString}) -&gt; Table</code></pre><p>Return a <code>DataFrame</code> with raw model <code>output</code> data for Domain <code>domainname</code>, or for Variables <code>varnames</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/OutputWriters.jl#L84-L89">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOboxes.show_variables-Tuple{PALEOmodel.AbstractOutputWriter}" href="#PALEOboxes.show_variables-Tuple{PALEOmodel.AbstractOutputWriter}"><code>PALEOboxes.show_variables</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">show_variables(output::PALEOmodel.AbstractOutputWriter; kwargs...) -&gt; Table
show_variables(output::PALEOmodel.AbstractOutputWriter, domainname::AbstractString; kwargs...) -&gt; Table</code></pre><p><strong>Keywords:</strong></p><ul><li><code>attributes=[:units, :vfunction, :space, :field_data, :description]</code>: Variable attributes to include</li><li><code>filter = attrb-&gt;true</code>: function to filter by Variable attributes. Example: <code>filter=attrb-&gt;attrb[:vfunction]!=PB.VF_Undefined</code> to show state Variables and derivatives.</li></ul><p><strong>Examples:</strong></p><pre><code class="nohighlight hljs">julia&gt; vscodedisplay(PB.show_variables(run.output))  # show all output Variables in VS code table viewer
julia&gt; vscodedisplay(PB.show_variables(run.output, [&quot;atm.pCO2PAL&quot;, &quot;fluxOceanBurial.flux_P_total&quot;]))  # show subset of output Variables in VS code table viewer</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/OutputWriters.jl#L100-L112">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOboxes.has_variable-Tuple{PALEOmodel.AbstractOutputWriter, AbstractString}" href="#PALEOboxes.has_variable-Tuple{PALEOmodel.AbstractOutputWriter, AbstractString}"><code>PALEOboxes.has_variable</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">has_variable(output::PALEOmodel.AbstractOutputWriter, varname::AbstractString)  -&gt; Bool</code></pre><p>True if model <code>output</code> contains Variable <code>varname</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/OutputWriters.jl#L92-L96">source</a></section></article><h4 id="Accessing-output-data"><a class="docs-heading-anchor" href="#Accessing-output-data">Accessing output data</a><a id="Accessing-output-data-1"></a><a class="docs-heading-anchor-permalink" href="#Accessing-output-data" title="Permalink"></a></h4><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOmodel.get_array-Tuple{PALEOmodel.AbstractOutputWriter, AbstractString, NamedTuple}" href="#PALEOmodel.get_array-Tuple{PALEOmodel.AbstractOutputWriter, AbstractString, NamedTuple}"><code>PALEOmodel.get_array</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_array(output::PALEOmodel.AbstractOutputWriter, varname::AbstractString [, allselectargs::NamedTuple]; kwargs...) -&gt; FieldArray
[deprecated] get_array(output::PALEOmodel.AbstractOutputWriter, varname::AbstractString; allselectargs...) -&gt; FieldArray</code></pre><p>Return a <a href="#PALEOmodel.FieldArray"><code>PALEOmodel.FieldArray</code></a> containing data values and any attached coordinates.</p><p>Equivalent to <code>PALEOmodel.get_array(PB.get_field(output, varname), allselectargs; kwargs)</code>, see <a href="#PALEOmodel.get_array-Tuple{PALEOmodel.FieldRecord}"><code>PALEOmodel.get_array(fr::PALEOmodel.FieldRecord)</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/OutputWriters.jl#L115-L123">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOboxes.get_field-Tuple{PALEOmodel.AbstractOutputWriter, AbstractString}" href="#PALEOboxes.get_field-Tuple{PALEOmodel.AbstractOutputWriter, AbstractString}"><code>PALEOboxes.get_field</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_field(output::PALEOmodel.AbstractOutputWriter, varname::AbstractString) -&gt; FieldRecord</code></pre><p>Return the <a href="#PALEOmodel.FieldRecord"><code>PALEOmodel.FieldRecord</code></a> for <code>varname</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/OutputWriters.jl#L143-L147">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOboxes.get_data-Tuple{PALEOmodel.AbstractOutputWriter, AbstractString}" href="#PALEOboxes.get_data-Tuple{PALEOmodel.AbstractOutputWriter, AbstractString}"><code>PALEOboxes.get_data</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_data(output::PALEOmodel.AbstractOutputWriter, varname; records=nothing) -&gt; values</code></pre><p>Get Variable <code>varname</code> raw data array, optionally restricting to <code>records</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/OutputWriters.jl#L150-L154">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOboxes.get_mesh-Tuple{PALEOmodel.AbstractOutputWriter, AbstractString}" href="#PALEOboxes.get_mesh-Tuple{PALEOmodel.AbstractOutputWriter, AbstractString}"><code>PALEOboxes.get_mesh</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_mesh(output::PALEOmodel.AbstractOutputWriter, domainname::AbstractString) -&gt; grid::Union{AbstractMesh, Nothing}</code></pre><p>Return <code>grid</code> for <code>output</code> Domain <code>domainname</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/OutputWriters.jl#L157-L161">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOmodel.FieldRecord" href="#PALEOmodel.FieldRecord"><code>PALEOmodel.FieldRecord</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">FieldRecord{FieldData &lt;: AbstractData, Space &lt;: AbstractSpace, V, N, Mesh, R}
FieldRecord(dataset, f::PB.Field, attributes; [sizehint=nothing])</code></pre><p>A series of <code>records::R</code> each containing the <code>values</code> from a <code>PALEOboxes.Field{FieldData, Space, N, V, Mesh}</code>.</p><p><strong>Implementation</strong></p><p>Fields with array <code>values</code> are stored in <code>records</code> as a Vector of arrays. Fields with single <code>values</code> (<code>field_single_element</code> true) are stored as a Vector of <code>eltype(Field.values)</code>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/FieldRecord.jl#L2-L11">source</a></section></article><h3 id="OutputMemory"><a class="docs-heading-anchor" href="#OutputMemory">OutputMemory</a><a id="OutputMemory-1"></a><a class="docs-heading-anchor-permalink" href="#OutputMemory" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOmodel.OutputWriters.OutputMemory" href="#PALEOmodel.OutputWriters.OutputMemory"><code>PALEOmodel.OutputWriters.OutputMemory</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">OutputMemory(; user_data=Dict{String, UserDataTypes}())</code></pre><p>In-memory container for model output, organized by model Domains.</p><p>Implements the <a href="#PALEOmodel.AbstractOutputWriter"><code>PALEOmodel.AbstractOutputWriter</code></a> interface, with additional methods <a href="#PALEOmodel.OutputWriters.save_netcdf"><code>save_netcdf</code></a> and <a href="#PALEOmodel.OutputWriters.load_netcdf!"><code>load_netcdf!</code></a> to save and load data.</p><p><strong>Implementation</strong></p><ul><li>Field <code>domains::Dict{String, OutputMemoryDomain}</code> contains per-Domain model output.</li><li>Field <code>user_data::Dict{String, UserDataTypes}</code> contains optional user data NB:<ul><li>available types are restricted to those that are compatible with NetCDF attribute types, ie Float64, Int64, String, Vector{Float64}, Vector{Int64}, Vector{String}</li><li>Vectors with a single element are read back from netcdf as scalars, see https://alexander-barth.github.io/NCDatasets.jl/dev/issues/#Corner-cases</li></ul></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/OutputWriters.jl#L546-L562">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOmodel.OutputWriters.OutputMemoryDomain" href="#PALEOmodel.OutputWriters.OutputMemoryDomain"><code>PALEOmodel.OutputWriters.OutputMemoryDomain</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">OutputMemoryDomain</code></pre><p>In-memory model output, for one model Domain.</p><p>Includes an additional record coordinate variable not present in Domain (usually <code>:tmodel</code>, when storing output vs time).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/OutputWriters.jl#L169-L175">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOmodel.OutputWriters.save_netcdf" href="#PALEOmodel.OutputWriters.save_netcdf"><code>PALEOmodel.OutputWriters.save_netcdf</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">save_netcdf(output::OutputMemory, filename; kwargs...)</code></pre><p>Save to <code>filename</code> in netcdf4 format (NB: filename must either have no extension or have extension <code>.nc</code>)</p><p><strong>Notes on structure of netcdf output</strong></p><ul><li>Each PALEO Domain is written to a netcdf4 group. These can be read into a Python xarray using the <code>group=&lt;domainname&gt;</code> argument to <code>open_dataset</code>.</li><li>Isotope-valued variables (<code>field_data = PB.IsotopeLinear</code>) are written with an extra <code>isotopelinear</code> netCDF dimension, containing the variable <code>total</code> and <code>delta</code>.</li><li>Any &#39;/&#39; characters in PALEO variables are substited for &#39;%&#39; in the netcdf name.</li></ul><p><strong>Keyword arguments</strong></p><ul><li><code>check_ext::Bool = true</code>: check that filename ends in &quot;.nc&quot;</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/OutputWriters.jl#L881-L893">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOmodel.OutputWriters.load_netcdf!" href="#PALEOmodel.OutputWriters.load_netcdf!"><code>PALEOmodel.OutputWriters.load_netcdf!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">load_netcdf!(output::OutputMemory, filename)</code></pre><p>Load from <code>filename</code> in netCDF format, replacing any existing content in <code>output</code>. (NB: filename must either have no extension or have extension <code>.nc</code>).</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; output = PALEOmodel.OutputWriters.load_netcdf!(PALEOmodel.OutputWriters.OutputMemory(), &quot;savedoutput.nc&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/OutputWriters.jl#L972-L982">source</a></section></article><h2 id="Field-Array"><a class="docs-heading-anchor" href="#Field-Array">Field Array</a><a id="Field-Array-1"></a><a class="docs-heading-anchor-permalink" href="#Field-Array" title="Permalink"></a></h2><p><a href="#PALEOmodel.FieldArray"><code>FieldArray</code></a> provides a generic array type with named dimensions <code>PALEOboxes.NamedDimension</code> each with optional coordinates for processing of model output.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOmodel.FieldArray" href="#PALEOmodel.FieldArray"><code>PALEOmodel.FieldArray</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">FieldArray</code></pre><p>A generic <a href="https://xarray.pydata.org/en/stable/index.html">xarray</a>-like or  <a href="https://scitools-iris.readthedocs.io/en/latest/">IRIS</a>-like  n-dimensional Array with named dimensions and optional coordinates.</p><p>NB: this aims to be simple and generic, not efficient !!! Intended for representing model output, not for numerically-intensive calculations.</p><p><strong>Fields</strong></p><ul><li><p><code>name::String</code>: variable name</p></li><li><p><code>values::AbstractArray</code>: n-dimensional Array of values</p></li><li><p><code>dims_coords::Vector{Pair{PALEOboxes.NamedDimension, Vector{PALEOmodel.FieldArray}}}</code>: Names of dimensions with optional attached coordinates</p></li><li><p><code>attributes::Union{Nothing, Dict{Symbol, Any}}</code>: variable attributes</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/FieldArray.jl#L1-L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOmodel.get_array-Tuple{PALEOmodel.FieldRecord}" href="#PALEOmodel.get_array-Tuple{PALEOmodel.FieldRecord}"><code>PALEOmodel.get_array</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_array(fr::FieldRecord [, allselectargs::NamedTuple] ; kwargs...) -&gt; fa::FieldArray
[deprecated] get_array(fr::FieldRecord [; kwargs...] [; allselectargs...]) -&gt; fa::FieldArray</code></pre><p>Return a <a href="#PALEOmodel.FieldArray"><code>FieldArray</code></a> containing an Array of values and any attached coordinates, for records and spatial region defined by <code>allselectargs</code>.</p><p><strong>Selecting records and regions</strong></p><p><code>allselectargs</code> is a <code>NamedTuple</code> of form:</p><pre><code class="nohighlight hljs">(&lt;dimcoordname&gt; = &lt;filter&gt;, &lt;dimcoordname&gt; = &lt;filter&gt;,  ... [,expand_cartesian=false] [, squeeze_all_single_dims=true])</code></pre><p>where <code>&lt;dimcoordname&gt;</code> is of form:</p><ul><li><code>&lt;dimname&gt;_isel</code> to select by array indices: <code>&lt;filter&gt;</code> may then be a single <code>Int</code> to select a single index, or a range <code>first:last</code> to select a range of indices.</li><li><code>&lt;coordname&gt;</code> to select by coordinate values using the coordinates attached to each dimension: <code>&lt;filter&gt;</code> may then be a single number to select a single index corresponding to the nearest value of the corresponding coordinate, or <code>(first::Float64, last::Float64)</code>  (a Tuple) to select a range starting at the index with the nearest value of <code>fr.coords_record</code> before <code>first</code> and ending at  the nearest index after <code>last</code>.</li></ul><p>Available dimensions and coordinates <code>&lt;dimcoordname&gt;</code> depend on the FieldRecord dimensions (as returned by <code>get_dimensions</code>, which will be a subset of grid spatial dimensions and Domain data dimensions) and corresponding attached coordinates (as returned by <code>get_coordinates</code>).</p><p>Some synonyms are defined for commonly used <code>&lt;dimnamecoordname&gt;</code>:</p><table><tr><th style="text-align: left">synonyms</th><th style="text-align: left">dimcoordname</th><th style="text-align: left">comment</th></tr><tr><td style="text-align: left">records</td><td style="text-align: left">&lt;recorddim&gt;_isel</td><td style="text-align: left">&lt;recorddim&gt; is usually tmodel</td></tr><tr><td style="text-align: left">cells, cell</td><td style="text-align: left">cells_isel</td><td style="text-align: left"></td></tr><tr><td style="text-align: left">column=&lt;n&gt;</td><td style="text-align: left">cells_isel = first:last</td><td style="text-align: left">select range of cells corresponding to column n</td></tr></table><p>NB: Dimensions corresponding to a selection for a single index or coordinate value are always squeezed out from the returned <a href="#PALEOmodel.FieldArray"><code>FieldArray</code></a>. Optional argument <code>squeeze_all_single_dims</code> (default <code>true</code>) controls whether <em>all</em> output dimensions that contain a single index are squeezed out (including eg a selection for a range that results in a dimension with one index, or where the input <code>FieldRecord</code> contains a dimension  with a single index).</p><p>Optional argument <code>expand_cartesian</code> (default <code>false</code>) is only needed for spatially resolved output using a <code>CartesianLinearGrid</code>,  set to <code>true</code> to expand compressed internal data (with spatial dimension <code>cells</code>) to a cartesian array  (with spatial dimensions eg <code>lon</code>, <code>lat</code>, <code>zt</code>)</p><p>Selection arguments used are returned as strings in <code>fa.attributes</code> <code>filter_records</code> and <code>filter_region</code> for use in plot labelling etc.</p><p><strong>Keyword arguments</strong></p><ul><li><p><code>coords=nothing</code>: replace the attached coordinates from the input <code>fr::FieldRecord</code> for one or more dimensions. Format is a Vector of Pairs of <code>&quot;&lt;dim_name&gt;&quot;=&gt;(&quot;&lt;var_name1&gt;&quot;, &quot;&lt;var_name2&gt;&quot;, ...)</code>,  eg to replace an nD column atmosphere model default pressure coordinate with a z coordinate:</p><pre><code class="nohighlight hljs">coords=[&quot;cells&quot;=&gt;(&quot;atm.zmid&quot;, &quot;atm.zlower&quot;, &quot;atm.zupper&quot;)]</code></pre></li><li><p><code>lookup_coordinates=true</code>: <code>true</code> to include coordinates, <code>false</code> to omit coordinates (both as selection options and in output <code>FieldArray</code>).</p></li><li><p><code>add_attributes=true</code>: <code>true</code> to transfer attributes from input <code>fr::FieldRecord</code> to output <code>FieldArray</code>, <code>false</code> to omit.</p></li><li><p><code>update_name=true</code>: <code>true</code> to update output <code>FieldArray</code> name to add Domain name prefix and suffix generated from <code>allselectargs</code> (NB: requires <code>add_attributes=true</code>),  <code>false</code> to use name from input FieldRecord.</p></li><li><p><code>omit_recorddim_if_constant=false</code>: Specify whether to include multiple (identical) records and record dimension for constant variables  (with attribute <code>is_constant = true</code>). PALEO currently always stores these records in the input <code>fr::FieldRecord</code>;   set <code>false</code> include them in <code>FieldArray</code> output, <code>true</code> to omit duplicate records and record dimension from output.</p></li></ul><p><strong>Examples</strong></p><ul><li><p>select a timeseries for single cell index 3 :</p><pre><code class="nohighlight hljs">get_array(fr, (cell=3, ))</code></pre></li><li><p>select first column at nearest available time to model time 10.0 :</p><pre><code class="nohighlight hljs">get_array(fr, (column=1, tmodel=10.0))</code></pre></li><li><p>set first column at nearest available time to model time 10.0, replacing atmosphere model pressure coordinate with z coordinate:</p><pre><code class="nohighlight hljs">get_array(
    fr, (column=1, tmodel=10.0);
    coords=[&quot;cells&quot;=&gt;(&quot;atm.zmid&quot;, &quot;atm.zlower&quot;, &quot;atm.zupper&quot;)]
)</code></pre></li><li><p>select surface 2D array (dimension <code>zt</code>, index 1) from 3D output at nearest available    time to model time 10.0, expanding <code>CartesianLinearGrid</code>:</p><pre><code class="nohighlight hljs">get_array(fr, (zt_isel=1, tmodel=10.0, expand_cartesian=true))</code></pre></li><li><p>select section 2D array at nearest index to longitude 200 degrees from 3D output at nearest available  time to model time 10.0, expanding <code>CartesianLinearGrid</code>:</p><pre><code class="nohighlight hljs">get_array(fr, (lon=200.0, tmodel=10.0, expand_cartesian=true))</code></pre></li><li><p>get full data cube as used for netcdf output, omitting coordinates and attributes, retaining singleton dimensions, and omitting  record dimension if variable is a constant:</p><pre><code class="nohighlight hljs">get_array(
    fr, (expand_cartesian=true, squeeze_all_single_dims=false);
    lookup_coordinates=false, add_attributes=false, omit_recorddim_if_constant=true
)</code></pre></li></ul><p><strong>Limitations</strong></p><ul><li>it is only possible to select either a single slice or a contiguous range for each dimension, not a set of slices for a Vector of index or coordinate values.</li><li>time-varying coordinates (eg a z coordinate in an atmosphere climate model) are not fully handled. If a single record is selected, the correct values for the coordinate at that time will be returned, but if multiple records are selected, the coordinate will be incorrectly fixed to the values at the time corresponding to the first record.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/FieldRecord.jl#L261-L355">source</a></section></article><h2 id="Plotting-output"><a class="docs-heading-anchor" href="#Plotting-output">Plotting output</a><a id="Plotting-output-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting-output" title="Permalink"></a></h2><h3 id="Plot-recipes"><a class="docs-heading-anchor" href="#Plot-recipes">Plot recipes</a><a id="Plot-recipes-1"></a><a class="docs-heading-anchor-permalink" href="#Plot-recipes" title="Permalink"></a></h3><p>Plotting using the Julia <a href="https://github.com/JuliaPlots/Plots.jl">Plots.jl</a> package is implemented by <a href="https://docs.juliaplots.org/latest/recipes/">plot recipes</a> that enable plotting of PALEO data types using the <code>plot</code> command.</p><p>The general principles are that:</p><ul><li>Data is extracted from model output into <a href="#PALEOmodel.FieldArray"><code>FieldArray</code></a>s with attached coordinates</li><li>Vector-valued arguments are &quot;broadcast&quot; to allow multiple line plot series to be overlaid in a single plot panel</li></ul><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RecipesBase.apply_recipe-Tuple{Dict{Symbol, Any}, PALEOmodel.AbstractOutputWriter, Union{AbstractString, Vector{var&quot;#s10&quot;} where var&quot;#s10&quot;&lt;:AbstractString}, NamedTuple}" href="#RecipesBase.apply_recipe-Tuple{Dict{Symbol, Any}, PALEOmodel.AbstractOutputWriter, Union{AbstractString, Vector{var&quot;#s10&quot;} where var&quot;#s10&quot;&lt;:AbstractString}, NamedTuple}"><code>RecipesBase.apply_recipe</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">plot(output::AbstractOutputWriter, vars::Union{AbstractString, Vector{&lt;:AbstractString}} [, selectargs::NamedTuple] [; coords::AbstractVector])
heatmap(output::AbstractOutputWriter, var::AbstractString [, selectargs::NamedTuple] [; coords::AbstractVector])
plot(outputs::Vector{&lt;:AbstractOutputWriter}, vars::Union{AbstractString, Vector{&lt;:AbstractString}} [, selectargs::NamedTuple] [; coords::AbstractVector])</code></pre><p>Plot recipe that calls <code>PB.get_field(output, var)</code>, and passes on to <code>plot(fr::FieldRecord, selectargs)</code> (see <a href="#RecipesBase.apply_recipe-Tuple{Dict{Symbol, Any}, PALEOmodel.FieldRecord, NamedTuple}"><code>RecipesBase.apply_recipe(::Dict{Symbol, Any}, fr::FieldRecord, selectargs::NamedTuple)</code></a>)</p><p>Vector-valued <code>outputs</code> or <code>vars</code> are &quot;broadcast&quot; to create a plot series for each element. A <code>labelprefix</code> (index in <code>outputs</code> Vector) is added to identify each plot series produced.</p><p>If <code>var</code> is of form <code>&lt;domain&gt;.&lt;name&gt;.&lt;structfield&gt;</code>, then sets the <code>structfield</code> keyword argument to take a single field from a <code>struct</code> Variable.</p><p>Optional argument <code>coords</code> can be used to supply plot coordinates from Variable in output. Format is a Vector of Pairs of &quot;coord<em>name&quot;=&gt;(&quot;var</em>name1&quot;, &quot;var_name2&quot;, ...)</p><p>Example: to replace a 1D column default pressure coordinate with a z coordinate:</p><pre><code class="nohighlight hljs">coords=[&quot;z&quot;=&gt;(&quot;atm.zmid&quot;, &quot;atm.zlower&quot;, &quot;atm.zupper&quot;)]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/PlotRecipes.jl#L131-L152">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RecipesBase.apply_recipe-Tuple{Dict{Symbol, Any}, PALEOmodel.FieldRecord, NamedTuple}" href="#RecipesBase.apply_recipe-Tuple{Dict{Symbol, Any}, PALEOmodel.FieldRecord, NamedTuple}"><code>RecipesBase.apply_recipe</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">plot(fr::FieldRecord, selectargs::NamedTuple)
heatmap(fr::FieldRecord, selectargs::NamedTuple)</code></pre><p>Plot recipe to plot a single <a href="#PALEOmodel.FieldRecord"><code>FieldRecord</code></a></p><p>Calls <a href="#PALEOmodel.get_array-Tuple{PALEOmodel.AbstractOutputWriter, AbstractString, NamedTuple}"><code>get_array(fr, selectargs)</code></a> and passes on to <code>plot(fa::FieldArray)</code> (see <a href="#RecipesBase.apply_recipe-Tuple{Dict{Symbol, Any}, PALEOmodel.FieldArray}"><code>RecipesBase.apply_recipe(::Dict{Symbol, Any}, fa::FieldArray)</code></a>).</p><p>Vector-valued fields in <code>selectargs</code> are &quot;broadcasted&quot; (generating a separate plot series for each combination)</p><p>Optional argument <code>coords</code> can be used to supply plot coordinates from Variable in output. Format is a Vector of Pairs of &quot;coord<em>name&quot;=&gt;(&quot;var</em>name1&quot;, &quot;var_name2&quot;, ...)</p><p>Example: to replace a 1D column default pressure coordinate with a z coordinate:</p><pre><code class="nohighlight hljs">coords=[&quot;z&quot;=&gt;(&quot;atm.zmid&quot;, &quot;atm.zlower&quot;, &quot;atm.zupper&quot;)]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/PlotRecipes.jl#L215-L233">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RecipesBase.apply_recipe-Tuple{Dict{Symbol, Any}, PALEOmodel.FieldArray}" href="#RecipesBase.apply_recipe-Tuple{Dict{Symbol, Any}, PALEOmodel.FieldArray}"><code>RecipesBase.apply_recipe</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">plot(fa::FieldArray; kwargs...)
heatmap(fa::FieldArray; kwargs...)
plot(fas::Vector{&lt;:FieldArray}; kwargs...)</code></pre><p>Plot recipe that plots a single [<code>FieldArray</code>] or Vector of [<code>FieldArray</code>]. </p><p>If <code>fa</code> has a single dimension, this is suitable for a line-like plot, if two dimensions, a heatmap.</p><p>If <code>fas::Vector</code> is supplied, this is &quot;broadcast&quot; generating one plot series for each element,  with the Vector index prepended to <code>labelprefix</code> to identify the plot series (unless overridden by <code>labellist</code> or <code>labelattribute</code>)</p><p><strong>Keywords</strong></p><ul><li><code>swap_xy::Bool=false</code>: true to swap x and y axes </li><li><code>mult_y_coord=1.0</code>: workaround for bugs in Plots.jl heatmap <code>yflip</code> - multiply y coordinate by constant factor.</li><li><code>structfield::Union{Symbol, Nothing}=nothing</code>: use field <code>structfield</code> from a struct-valued array.</li><li><code>map_values=PB.get_total</code>: function to apply to y (for a 1D series) or z (for a 2D heatmap etc) before plotting </li><li><code>labelprefix=&quot;&quot;</code>: prefix for plot label.</li><li><code>labellist=[]</code>: list of labels to override defaults</li><li><code>labelattribute=nothing</code>: FieldArray attribute to use as label</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/PlotRecipes.jl#L248-L268">source</a></section></article><h3 id="Assembling-multi-plot-panels"><a class="docs-heading-anchor" href="#Assembling-multi-plot-panels">Assembling multi-plot panels</a><a id="Assembling-multi-plot-panels-1"></a><a class="docs-heading-anchor-permalink" href="#Assembling-multi-plot-panels" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOmodel.PlotPager" href="#PALEOmodel.PlotPager"><code>PALEOmodel.PlotPager</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">PlotPager(layout [, kwargs=NamedTuple()][; displayfunc=(plot, nplot)-&gt;display(plot)])</code></pre><p>Accumulate plots into subplots.</p><p><code>layout</code> is supplied to <code>Plots.jl</code> <code>layout</code> keyword, may be an Int or a Tuple (ny, nx), see <a href="https://docs.juliaplots.org/latest/">https://docs.juliaplots.org/latest/</a>.</p><p>Optional argument <code>kwargs::NamedTuple</code> provides additional keyword arguments passed through to <code>plot</code> (eg <code>(legend_background_color=nothing, )</code> to set all subplot legends to transparent backgrounds)</p><p>Optional keyword argument <code>displayfunc::(plot, nplot)-&gt;display(plot)</code> provides the function used to display a screen of plots, where <code>plot</code> is a Plot object and <code>nplot::Integer</code> is the sequential number of this screen.</p><p><strong>Usage</strong></p><pre><code class="nohighlight hljs">julia&gt; pp = PlotPager((2,2))  # 4 panels per screen (2 down, 2 across)
julia&gt; pp(plot(1:3))  # Accumulate
julia&gt; pp(:skip, plot(1:4), plot(1:5), plot(1:6))  # add multiple panels in one command
julia&gt; pp(:newpage) # flush any partial screen and start new page (NB: always add this at end of a sequence!)

julia&gt; pp = PlotPager((2, 2); displayfunc=(plot, nplot)-&gt;savefig(plot, &quot;plot_$nplot.png&quot;)) # save to file instead of default display</code></pre><p><strong>Commands</strong></p><ul><li><code>pp(p)</code>: accumulate plot p</li><li><code>pp(:skip)</code>: leave a blank panel</li><li><code>pp(:newpage)</code>: fill with blank panels and start new page</li><li><code>pp(p1, p2, ...)</code>: multiple plots/commands in one call </li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/PlotRecipes.jl#L9-L37">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOmodel.DefaultPlotPager" href="#PALEOmodel.DefaultPlotPager"><code>PALEOmodel.DefaultPlotPager</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">DefaultPlotPager()</code></pre><p>Dummy version of <a href="#PALEOmodel.PlotPager"><code>PlotPager</code></a> that just calls <code>display</code> for each plot.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/PlotRecipes.jl#L94-L98">source</a></section></article><h2 id="Analyze-reaction-network"><a class="docs-heading-anchor" href="#Analyze-reaction-network">Analyze reaction network</a><a id="Analyze-reaction-network-1"></a><a class="docs-heading-anchor-permalink" href="#Analyze-reaction-network" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOmodel.ReactionNetwork" href="#PALEOmodel.ReactionNetwork"><code>PALEOmodel.ReactionNetwork</code></a> — <span class="docstring-category">Module</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ReactionNetwork</code></pre><p>Functions to analyze a PALEOboxes.Model or PALEOmodel output that contains a reaction network</p><p>Compiles reaction stoichiometry and rate information from attributes attached to reaction rate variables:</p><ul><li>rate_processname::String: a process name (eg &quot;photolysis&quot;, &quot;reaction&quot;, ...)</li><li>rate_species::Vector{String} names of reactant and product species</li><li>rate_stoichiometry::Vector{Float64} stoichiometry of reactant and product species</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/ReactionNetwork.jl#L1-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOmodel.ReactionNetwork.get_ratetable" href="#PALEOmodel.ReactionNetwork.get_ratetable"><code>PALEOmodel.ReactionNetwork.get_ratetable</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_ratetable(model, domainname) -&gt; DataFrame
get_ratetable(output, domainname) -&gt; DataFrame</code></pre><p>Get table of rate Variables and reactions</p><p>Returns a DataFrame with columns <code>:name</code>, <code>:rate_processname</code>, <code>:rate_species</code>, <code>:rate_stoichiometry</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/ReactionNetwork.jl#L106-L113">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOmodel.ReactionNetwork.get_all_species_ratevars" href="#PALEOmodel.ReactionNetwork.get_all_species_ratevars"><code>PALEOmodel.ReactionNetwork.get_all_species_ratevars</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_all_species_ratevars(model, domainname) -&gt; OrderedDict(speciesname =&gt; [(stoich, ratevarname, processname), ...])
get_all_species_ratevars(output, domainname) -&gt; OrderedDict(speciesname =&gt; [(stoich, ratevarname, processname), ...])
get_all_species_ratevars(ratetable::DataFrame) -&gt; OrderedDict(speciesname =&gt; [(stoich, ratevarname, processname), ...])</code></pre><p>Get all species and contributing reaction rate Variable names as Dict of Tuples (stoich, ratevarname, processname) where <code>ratevarname</code> is the name of an output Variable with a reaction rate, <code>stoich</code> is the stoichiometry of that rate applied to <code>species</code>, and <code>processname</code> identifies the nature of the reaction.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/ReactionNetwork.jl#L151-L159">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOmodel.ReactionNetwork.get_rates" href="#PALEOmodel.ReactionNetwork.get_rates"><code>PALEOmodel.ReactionNetwork.get_rates</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_rates(output, domainname [, outputrec] [, indices] [, scalefac] [, add_equations] [, ratetable_source]) -&gt; DataFrame</code></pre><p>Get all reaction rates as column <code>rate_total</code> for <code>domainname</code> from <code>output</code> record <code>outputrec</code> (defaults to last time record), for subset of cells in <code>indices</code> (defaults to whole domain).</p><p>Set optional <code>ratetable_source = model</code> to use with older output that doesn&#39;t include rate variable attributes.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/ReactionNetwork.jl#L195-L202">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOmodel.ReactionNetwork.get_all_species_ratesummaries" href="#PALEOmodel.ReactionNetwork.get_all_species_ratesummaries"><code>PALEOmodel.ReactionNetwork.get_all_species_ratesummaries</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_all_species_ratesummaries(output, domainname [, outputrec] [, indices] [, scalefac] [, ratetable_source]) 
    -&gt; OrderedDict(speciesname =&gt; (source, sink, net, source_rxs, sink_rxs))</code></pre><p>Get <code>source</code>, <code>sink</code>, <code>net</code> rates and rates of <code>source_rxs</code> and <code>sink_rxs</code>  for all species in <code>domainname</code> from <code>output</code> record <code>outputrec</code> (defaults to last record),  cells in <code>indices</code> (defaults to whole domain),</p><p>Optional <code>scalefac</code> to convert units, eg <code>scalefac</code>=1.90834e12 to convert mol m-2 yr-1 to molecule cm-2 s-1</p><p>Set optional <code>ratetable_source = model</code> to use with older output that doesn&#39;t include rate variable attributes.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/ReactionNetwork.jl#L227-L238">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PALEOmodel.ReactionNetwork.show_ratesummaries" href="#PALEOmodel.ReactionNetwork.show_ratesummaries"><code>PALEOmodel.ReactionNetwork.show_ratesummaries</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">show_ratesummaries([io::IO = stdout], ratesummaries [; select_species=[]])</code></pre><p>Print per-species reaction rates from <code>ratesummaries</code> to output stream <code>io</code> (defaults to <code>stdout</code>),  optionally selecting species to print.</p><p><strong>Example</strong></p><pre><code class="nohighlight hljs">ratesummaries = PALEOmodel.ReactionNetwork.get_all_species_ratesummaries(output, &quot;atm&quot;)
PALEOmodel.ReactionNetwork.show_ratesummaries(ratesummaries)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOmodel.jl/blob/025c72217fd62934f143ce40b9e0c40a3edd7d75/src/ReactionNetwork.jl#L285-L296">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../PALEOmodelSolvers/">« PALEOmodel solvers</a><a class="docs-footer-nextpage" href="../References/">References »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Thursday 2 January 2025 21:28">Thursday 2 January 2025</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
